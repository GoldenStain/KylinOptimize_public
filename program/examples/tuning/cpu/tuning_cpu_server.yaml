project: "cpu_tuning"
maxiterations: 1000
startworkload: ""
stopworkload: ""
object:
  - name: "cpu_governor"
    info:
      desc: "CPU governor mode."
      get: "cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor"
      set: "echo $value > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor"
      needrestart: "false"
      type: "discrete"
      options:
        - "performance"
        - "powersave"
        - "ondemand"
        - "conservative"
        - "schedutil"
      dtype: "string"

  - name: "cpu_freq"
    info:
      desc: "CPU frequency scaling."
      get: "cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq"
      set: "echo $value > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq"
      needrestart: "false"
      type: "discrete"
      scope:
        - 800000
        - 3600000
      step: 100000
      dtype: "int"

  - name: "transparent_hugepage_enabled"
    info:
      desc: "mode of transparent_hugepage."
      get: "cat /sys/kernel/mm/transparent_hugepage/enabled | grep -Po '\\[.*\\]' | cut -d '[' -f2 | cut -d ']' -f1"
      set: "echo $value > /sys/kernel/mm/transparent_hugepage/enabled"
      needrestart: "false"
      type: "discrete"
      options:
        - "always"
        - "madvise"
        - "never"
      dtype: "string"

  - name: "transparent_hugepage_defrag"
    info:
      desc: "mode of transparent_hugepage_defrag."
      get: "cat /sys/kernel/mm/transparent_hugepage/defrag | grep -Po '\\[.*\\]' | cut -d '[' -f2 | cut -d ']' -f1"
      set: "echo $value > /sys/kernel/mm/transparent_hugepage/defrag"
      needrestart: "false"
      type: "discrete"
      options:
        - "always"
        - "defer"
        - "defer+madvise"
        - "madvise"
        - "never"
      dtype: "string"
